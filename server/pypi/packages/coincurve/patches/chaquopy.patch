--- src-original/hatch_build.py	2024-01-01 00:00:00.000000000 +0000
+++ src/hatch_build.py	2024-01-01 00:00:00.000000000 +0000
@@ -28,7 +28,8 @@
         build_data["force_include"][cffi_shared_lib] = relative_path
 
         dist = distribution("cffi")
-        license_files = [f for f in dist.files if f.name == "LICENSE" and f.parent.name.endswith(".dist-info")]
+        # Chaquopy: check if .dist-info is in the parent path (not just the name) to handle LICENSE files in subdirectories
+        license_files = [f for f in dist.files if f.name == "LICENSE" and ".dist-info" in str(f.parent)]
         if len(license_files) != 1:
             message = f"Expected exactly one LICENSE file in cffi distribution, got {len(license_files)}"
             raise RuntimeError(message)

